<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/images/Itacorda_Logo.PNG" type="image/png">
  <title>Portal de Processos</title>
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.4/mammoth.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:false});</script>
</head>
<body>

  <header>
    <h2 class="header-logo">
      <img src="/images/Itacorda_Logo.PNG" alt="Itacorda Logo">
      <div id="user-info" class="user-info"></div>
    </h2>
    <nav>
      <button id="btn-uso-comum">Uso Comum</button>
      <button id="btn-novo-processo">Novo Processo</button>
      <button id="btn-meus-processos">Meus Processos</button>
      <button id="btn-treinamentos">Treinamentos</button>
      <a href="/logout">Sair</a>
    </nav>
  </header>

  <main>
    <section class="welcome">
      <div class="welcome-text">
        <h3>Bem-vindo(a)!</h3>
        <p>Aqui você pode visualizar e documentar seus processos operacionais.</p>
      </div>

      <div class="search-container">
        <input type="text" id="pesquisa" placeholder="Pesquisar processo...">
        <button id="btn-pesquisar">Pesquisar</button>
        <button id="btn-clear">Limpar</button>
      </div>
    </section>

    <section class="resultados-busca" id="resultados-busca" style="display:none;">
      <h3>Resultados da busca</h3>
      <ul id="resultados-ul"></ul>
    </section>

    <section class="novo-processo" id="novo-processo" style="display:none;">
      <h3>Novo Processo</h3>

      <label for="titulo">Título do Processo:</label>
      <input type="text" id="titulo" placeholder="Digite o título do processo" />

      <label for="descricao">Descrição:</label>
      <div id="descricao" contenteditable="true"
        style="white-space: normal; line-height: 1.6; min-height: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; background-color: #fff;">
      </div>

      <label for="revisao">Número da Revisão:</label>
      <input type="number" id="revisao" placeholder="Ex: 1" min="1" value="1" disabled />

      <label for="data_proxima_revisao">Data da Próxima Revisão:</label>
      <input type="date" id="data_proxima_revisao" disabled/>

      <label for="word-file">Importar de arquivo Word (opcional):</label>
      <input type="file" id="word-file" accept=".doc,.docx" />

      <button id="salvar-processo">Salvar Processo</button>
    </section>

    <section class="meus-processos" id="meus-processos" style="display:none;">
      <h3>Meus Processos</h3>
      <table>
        <thead>
          <tr>
            <th>Id</th>
            <th>Título</th>
            <th>Data de Inclusão</th>
            <th>Revisão</th>
            <th>Próxima Revisão</th>
            <th>Uso Comum</th>
            <th>Editar</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="tabela-meus-processos"></tbody>
      </table>
    </section>

    <section class="tabela-uso-comum" id="tabela-uso-comum" style="display:none;">
      <h3>Processos de Uso Comum</h3>
      <table>
        <thead>
          <tr>
            <th>Id</th>
            <th>Título</th>
            <th>Data de Inclusão</th>
            <th>Revisão</th>
            <th>Próxima Revisão</th>
            <th>Uso Comum</th>
            <th>Editar</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="tabela-uso-comum-body"></tbody>
      </table>
    </section>

    <section class="processos-recentes">
      <h3>Processos Recentes</h3>
      <table>
        <thead>
          <tr>
            <th>Id</th>
            <th>Título</th>
            <th>Data de Inclusão</th>
            <th>Revisão</th>
            <th>Próxima Revisão</th>
            <th>Uso Comum</th>
            <th>Editar</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="tabela-processos-recentes"></tbody>
      </table>
    </section>
  </main>

  <div id="display-word" class="display-box" style="display:none;">
    <h3>Conteúdo do Word</h3>
    <div id="word-content"></div>
  </div>
  <div id="display-editar" class="display-box" style="display:none;">
    <h3>Editar Processo</h3>
    
    <input type="hidden" id="editar-id">

    <label for="editar-titulo">Título:</label>
    <input type="text" id="editar-titulo" style="width:100%; margin-bottom:10px;">

    <label for="editar-descricao">Descrição:</label>
    <div id="editar-descricao" contenteditable="true"
        style="white-space: normal; line-height: 1.6; min-height: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; background-color: #fff; margin-bottom:10px;">
    </div>

    <label for="editar-revisao">Revisão:</label>
    <input type="number" id="editar-revisao" style="margin-bottom:10px;" min="1" disabled>

    <label for="editar-data_proxima_revisao">Próxima Revisão:</label>
    <input type="date" id="editar-data_proxima_revisao" style="margin-bottom:10px;" disabled>

    <button id="btn-salvar-edicao">Salvar Alterações</button>
  </div>
  <script src="/js/main.js"></script>
</body>
</html>
